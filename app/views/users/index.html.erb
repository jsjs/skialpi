<% provide(:title, "Používatelia") %>

<h1> Používatelia </h1>

Počet zaregistrovaných používateľov: <%= @users.count %>

<%= will_paginate %>

<table class="table table-striped">
  
  <th> Meno </th> <th> Pohlavie </th> <th> Počet bodov </th> <th> Body sezóna </th>
  <% if !current_user.nil? && current_user.admin? %>
    <th></th>
  <% end %>
  
  <% @users.each do |user| %>
    <tr>
      <td> <%= link_to user.name, user %> </td>
      <% sx = "m" %>
      <% sx = "ž" if user.sex.eql? "f" %>
      <td> <%= sx %> </td>
      <td> <%= user.achievements.sum(:points) %> </td>
      <td> <%= user.season_achievements.sum(:points) %> </td>
      <% if !current_user.nil? && current_user.admin? && !current_user?(user) %>
      <td>
        <%= link_to "[zmazať]", user, method: :delete,
                                  data: { confirm: "Ste si istí?" } %>
      </td>
      <% else %>
        <td></td>
      <% end %>
    </tr>
  <% end %>

</table>

<%= will_paginate %>
